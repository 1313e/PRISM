language: python
dist: xenial
sudo: true
matrix:
  include:
    - python: 2.7
      env: RUN_COVERAGE=0
    - python: 3.5
      env: RUN_COVERAGE=1
    - python: 3.5-dev
      env: RUN_COVERAGE=0
    - python: 3.6
      env: RUN_COVERAGE=0
    - python: 3.6-dev
      env: RUN_COVERAGE=0
    - python: 3.7
      env: RUN_COVERAGE=0
    - python: 3.7-dev
      env: RUN_COVERAGE=0
install:
  - pip install -r requirements_dev.txt
script:
  - check-manifest
  - python setup.py sdist bdist_wheel
  - twine check dist/*
  - pip install -e .
  - python -c "import prism; prism.get_info()"
after_success:
  - |
    if [[ "$RUN_COVERAGE" == "1" ]]; then
      codecov
    fi
before_deploy:
    - rm -r dist
    - rm -r build
deploy:
    provider: pypi
    user: "1313e"
    password:
        secure: "KyO+gZmGeqd2OP59Tb+V1KEocawATq78WDG4L9gNCGloEFUfD3KoIQ3ffMm+xeIcOiciG1I51GaknxNcix9LjYdPUNodwkvXCCI2FzaFFwtaoA49UGE9cse0GCsALZ++caTc8nyUDZ/URHD0kw/WG0F5oBLB/16Vzxgmh1DVrQ6HDQiRBJMWqrVt3zW8/27CGPMbfjcLIjzmWn0dlI1LCyp7eFE7EXcYt2FazMnFLDQF/h4mn9vMTzm9qMz+PXmp2x7I97nRJ9/62Clh7VnDAwRR9JC4SFBgaooNspmltDC49U/gpVcS5ndnqKzyyQiuIODQpvAyQWREN7jDeSjeZRYFipFU8/lS2Xc9uKTLdOzP5RCIWL8MEwoI9vAbEboUcFdCpoDJUWkNSItPCfDelC7YDDBqxJYGpyQ7RhOfCyqk/J/fikX72sDrn/A1H0xy2vsQaWipHiqTyN+d0UsJJUFLfNguLpjzVsq5e0eNlaBk8/rieWCnVZfdxd7ZHPseZtlO7JXpyowSQBo6f4SZ+OgktZnaPz+BEOAYkmUZCru+dYi2+xesrIYC4G/MhSSF8H69NEjGyf8cc+fPhn7/4M+cO4Gm2y4O/yjcXa3cV/u4GsDydM2sjRdYw4zsaHlE91JZwaXckDAdJJsMzv40MVptsBOuuLtMYMQjED1cI9c="
    distributions: "sdist bdist_wheel"
    skip_existing: true
    on:
        branch: master
    
notifications:
  email: false
